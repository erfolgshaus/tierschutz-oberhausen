<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Admin</title></head>
<body>
<h1>Adminbereich</h1>
<input id="pw" placeholder="Passwort" type="password">
<input id="delIndex" placeholder="Index löschen" type="number">
<button onclick="del()">Löschen</button>
<pre id="output">Lade...</pre>
<script>
async function lade() {
  const r = await fetch('/api/status');
  const d = await r.json();
  let text = '';
  for (const [k,v] of Object.entries(d)) {
    text += `Bezirk ${k} (${v.name}): ${v.anzahl}/20\n`;
  }
  document.getElementById("output").innerText = text;
}
async function del() {
  const index = document.getElementById("delIndex").value;
  const password = document.getElementById("pw").value;
  const res = await fetch("/api/admin/delete", {
    method: "POST",
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ index: parseInt(index), password })
  });
  alert(await res.text());
  lade();
}
lade();
</script>
</body>
</html>