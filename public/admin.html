<!DOCTYPE html>
<html lang="de">
<head><meta charset="UTF-8"><title>Admin</title></head>
<body>
<h1>Adminbereich</h1>
<div id="ausgabe">Wird geladen...</div>
<script>
async function lade() {
  const res = await fetch('/api/status');
  const status = await res.json();
  let html = '';
  for (const [bez, info] of Object.entries(status)) {
    html += `<h3>Bezirk ${bez} (${info.name}) â€“ ${info.anzahl}/20</h3>`;
    const r = await fetch('/api/eintraege/' + bez);
    const daten = await r.json();
    if (daten.length === 0) {
      html += "<p><i>Keine EintrÃ¤ge</i></p>"; continue;
    }
    html += "<ul>";
    for (const e of daten) {
      html += `<li>${e.vorname} ${e.nachname}, ${e.strasse} ${e.hausnummer} <button onclick="loesche('${e.id}')">ðŸ—‘</button></li>`;
    }
    html += "</ul>";
  }
  document.getElementById("ausgabe").innerHTML = html;
}
async function loesche(id) {
  const res = await fetch('/api/admin/delete', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id })
  });
  alert(await res.text());
  lade();
}
lade();
</script>
</body>
</html>